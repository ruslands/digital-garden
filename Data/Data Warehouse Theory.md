## 1) Определение

**Хранилище данных (Data Warehouse, DWH)** — это централизованная система для хранения интегрированных, очищенных и историзированных данных, предназначенных для аналитики и принятия решений (BI).

Автор концепции: **Bill Inmon**.

---

## 2) Основные свойства DWH (по Inmon)

1. **Subject-oriented** — ориентировано на предметные области (продажи, клиенты, финансы).
2. **Integrated** — данные консолидированы из разных источников.
3. **Non-volatile** — данные неизменяемы (только вставка).
4. **Time-variant** — данные содержат историю.

---

## 3) Архитектура DWH

### Классическая трёхуровневая:

1. **Sources** — OLTP, CRM, ERP.
2. **ETL слой** — извлечение, очистка, трансформация, загрузка.
3. **DWH** — централизованное хранилище.
4. **Data Marts** — витрины данных.
5. **BI** — отчёты, аналитика, ML.

---

## 4) OLTP vs OLAP

|              | OLTP       | OLAP           |
| ------------ | ---------- | -------------- |
| Назначение   | операции   | аналитика      |
| Данные       | актуальные | исторические   |
| Нормализация | высокая    | денормализация |
| Запросы      | короткие   | сложные        |
| Объём        | низкий     | высокий        |

---

## 5) ETL / ELT

### ETL (Extract — Transform — Load):

Трансформация на стороне ETL-движка → затем загрузка в хранилище.
Типично для классических DWH.

### ELT (Extract — Load — Transform):

Сырьё грузится в DWH → трансформация внутри.
Популярно в облачных DWH (Snowflake, BigQuery).

---

## 6) Модели данных

### ⭐ 6.1. Звезда (Star Schema)

* Таблица фактов
* Таблицы измерений
* Денормализовано → быстрее

```
FactSales
 ├── DimDate
 ├── DimProduct
 ├── DimStore
 └── DimCustomer
```

Хороша для BI, быстрых запросов.

---

### ⭐ 6.2. Снежинка (Snowflake)

* Измерения нормализованы
* Меньше дублирования данных
* Медленнее, сложнее

---

### ⭐ 6.3. Data Vault

* Hub + Link + Satellites
* Масштабируемость
* Гибкость, историзация
* Лучше подходит для корпоративных DWH

---

## 7) Типы таблиц

### 7.1. Таблицы фактов

* Содержат числовые метрики
* Внешние ключи на измерения

Типы фактов:

* Transaction fact
* Snapshot fact
* Accumulating snapshot fact

### 7.2. Таблицы измерений

* Справочная инфа
* Атрибуты объектов (клиент, товар)

---

## 8) SCD — медленно изменяющиеся измерения

| Тип  | Описание               |
| ---- | ---------------------- |
| SCD1 | обновление без истории |
| SCD2 | история → новая строка |
| SCD3 | хранится часть истории |

На практике чаще SCD2.

---

## 9) Staging area

Промежуточное хранилище сырья до трансформации.

---

## 10) Data Marts

Витрины для конкретных задач
Построение:

* Inmon (DWH → marts)
* Kimball (мarts → DWH)

---

## 11) IDEF / Kimball / Inmon

### Inmon (Corporate Information Factory)

* Сначала корпоративное DWH (3NF)
* Потом витрины

### Kimball (Dimensional Modelling)

* Сначала витрины
* Используется star schema

---

## 12) Метаданные

Каталог:

* источники
* трансформации
* расписания
* структура данных

---

## 13) Качество данных (Data Quality)

Оценки:

* точность
* полнота
* согласованность
* уникальность
* своевременность

---

## 14) Data Governance & Security

* роли
* политики доступа
* аудит
* каталог данных

---

## 15) DWH vs Data Lake

|                  | DWH               | Data Lake      |
| ---------------- | ----------------- | -------------- |
| данные           | структурированные | любые          |
| схема            | schema-on-write   | schema-on-read |
| скорость анализа | высокая           | зависит        |
| цена             | дороже            | дешевле        |

Data Lakehouse = гибрид.

---

# Итоги

Хранилище данных — это:

* аналитически ориентированная система
* интегрированная
* историзированная
* неизменяемая

Основы строятся на:

* Kimball / Inmon
* Dimensional modelling
* ETL/ELT
* Star/Snowflake/DataVault
* OLAP

---

Если нужно, могу:
✅ сделать краткий конспект на 1–2 страницы
✅ подготовить билетные ответы
✅ сделать сравнение Kimball vs Inmon
✅ дать примеры на SQL

Хочешь краткий конспект в 1 лист?
